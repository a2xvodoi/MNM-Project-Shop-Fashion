<%- include('layouts/head') %>
    <!-- Product List Start -->
    <div class="product-view">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="product-view-top">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="product-search">
                                            <input type="email" value="Search">
                                            <button><i class="fa fa-search"></i></button>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="product-short">
                                            <div class="dropdown">
                                                <div class="dropdown-toggle" data-toggle="dropdown">Product short by
                                                </div>
                                                <div class="dropdown-menu dropdown-menu-right ">
                                                    <a href="#" class="dropdown-item">Newest</a>
                                                    <a href="#" class="dropdown-item">Popular</a>
                                                    <a href="#" class="dropdown-item">Most sale</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="product-price-range">
                                            <div class="dropdown">
                                                <div class="dropdown-toggle" data-toggle="dropdown">Product price range
                                                </div>
                                                <div class="dropdown-menu dropdown-menu-right">
                                                    <a href="#" class="dropdown-item">$0 to $50</a>
                                                    <a href="#" class="dropdown-item">$51 to $100</a>
                                                    <a href="#" class="dropdown-item">$101 to $150</a>
                                                    <a href="#" class="dropdown-item">$151 to $200</a>
                                                    <a href="#" class="dropdown-item">$201 to $250</a>
                                                    <a href="#" class="dropdown-item">$251 to $300</a>
                                                    <a href="#" class="dropdown-item">$301 to $350</a>
                                                    <a href="#" class="dropdown-item">$351 to $400</a>
                                                    <a href="#" class="dropdown-item">$401 to $450</a>
                                                    <a href="#" class="dropdown-item">$451 to $500</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <% products.forEach(product=> { %>
                            <div class="col-md-3">
                                <div class="product-item">
                                    <div class="product-title">
                                        <a href="/products/<%= product._id %>">
                                            <%= product.name %>
                                        </a>

                                    </div>
                                    <div class="product-image">
                                        <a href="product-detail.html">
                                            <img src="<%= product.avatar %> " alt="Product Image" height="450px">
                                        </a>
                                        <div class="product-action">
                                            <a href="#"><i class="fa fa-cart-plus"></i></a>
                                            <a href="#" class="wishlist-add" data-id="<%= product._id %>"><i
                                                    class="fa fa-heart"></i></a>
                                            <a href="/products/<%= product._id %>"><i class="fa fa-search"></i></a>
                                        </div>
                                    </div>
                                    <div class="product-price">
                                        <h3><span>$</span>
                                            <%= product.price %>
                                        </h3>
                                        <a class="btn" href=""><i class="fa fa-shopping-cart"></i>Buy Now</a>
                                    </div>
                                </div>
                            </div>
                            <% }) %>


                    </div>

                    <!-- Pagination Start -->
                    <div class="col-md-12">
                        <!-- pagination -->
                        <% if(pages> 0) { %>
                            <!-- show pagination if there is pages -->
                            <nav class="mx-auto" aria-label="Page navigation example">
                                <ul class="pagination justify-content-center">
                                    <!-- FIRST ITEM -->
                                    <% if(current==1) { %>
                                        <li class="page-item disabled">
                                            <a class="page-link" href="#">Previous</a>
                                        </li>
                                        <% } else { %>
                                            <li class="page-item">
                                                <a class="page-link" href="?page=<%= Number(current) - 1 %> ">Previous</a>
                                            </li>
                                            <% } %>
                                                <!-- ITEMS  -->
                                                <% var i=(Number(current)> 5 ? Number(current) - 4 : 1) %>
                                                    <% if(i !==1) { %>
                                                        <li class="page-item disabled">
                                                            <a class="page-link" href="#">...</a>
                                                        </li>
                                                        <% } %>
                                                            <% for(; i <=(Number(current) + 4) && i <=pages; i++) { %>
                                                                <% if(i==current) { %>
                                                                    <li class="page-item active">
                                                                        <a class="page-link" href="?page=<%= i %>">
                                                                            <%= i %>
                                                                        </a>
                                                                    </li>
                                                                    <% } else { %>
                                                                        <li class="page-item">
                                                                            <a class="page-link" href="?page=<%= i %>">
                                                                                <%= i %>
                                                                            </a>
                                                                        </li>
                                                                        <% } %>
                                                                            <% if (i==Number(current) + 4 && i < pages)
                                                                                { %>
                                                                                <li class="page-item disabled">
                                                                                    <a class="page-link" href="#">...</a>
                                                                                </li>
                                                                                <% } %>
                                                                                    <% } %>
                                                                                        <!-- LAST ITEM -->
                                                                                        <% if(current==pages) { %>
                                                                                            <li class="page-item disabled">
                                                                                                <a class="page-link" href="#">
                                                                                                    Next
                                                                                                </a>
                                                                                            </li>
                                                                                            <% } else { %>
                                                                                                <li class="page-item">
                                                                                                    <a class="page-link" href="?page=<%= Number(current) + 1 %>">
                                                                                                        Next
                                                                                                    </a>
                                                                                                </li>
                                                                                                <% } %>
                                </ul>
                            </nav>
                            <% } %>
                    </div>
                    <!-- Pagination Start -->
                </div>

            </div>
        </div>
    </div>
    <!-- Product List End -->
    <%- include('layouts/foot') %>
        <%- include('partials/add-wishlist') %>